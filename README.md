# Вариант 17

1. baaa →  aaab
2. aabb →  abab
3. aa →  bab
4. aaab →  ab
5. bbb →  b

---

### 1. Завершимость

Введем меру:

M(w) = M(A(w), B(w), C(w))

с фундированным порядком A > B > C, где:

- A(w) — |w|<sub>a</sub> 
- B(w) — |w|<sub>b</sub>
- C(w) — сумма трёх мер: |w|<sub>aa</sub>+ |w|<sub>bb</sub> + суммарное расстояние от каждой b до конца слова по индексу b

**Рассмотрим каждое правило системы τ:**

1. Для правил (3) и (4) в любом контексте мера M убывает по A.  
2. Для правила (5) в любом контексте мера M убывает по B.  
3. Для правил (1) и (2) в любом контексте меры A и B не изменяются.  
4. Для правила (1) рассмотрим изменение меры C(w) в контексте w = w₁ l w₂, где l — lhs правила 1 (baaa):

    | Контекст | Изменение меры |
    |-----------|----------------|
    | w = w₁ a l a w₂ | 3 |
    | w = w₁ a l b w₂ | 1 |
    | w = w₁ b l a w₂ | 5 |
    | w = w₁ b l b w₂ | 3 |
    | w = w₁ a l | 2 |
    | w = w₁ b l | 4 |
    | w = a l a w₂ | 4 |
    | w = b l a w₂ | 2 |
    | w = l | 3 |

    Следовательно, для любого w при применении правила (1) мера M убывает по C.

5. Для правила (2) рассмотрим изменение меры C(w) в контексте w = w₁ l w₂, где l = aabb.  
Так как первый и последний символы l при применении правила не изменяются, а в мерах |w|<sub>aa</sub> и |w|<sub>bb</sub> необходимо смотреть только на пары подряд идущих символов, то вне зависимости от контекста |w|<sub>aa</sub> + |w|<sub>bb</sub> уменьшается на 2.  
Суммарное расстояние от каждой b до конца слова по индексу вне контекста увеличивается на 1.  
Следовательно, вне контекста для любого w мера M убывает по C на 2−1 = 1.

Так как для любого w применение любого правила из TRS τ уменьшает меру M, а M принимает только значения из множества ℕ ∪ {0}, цепочка переписываний конечна.  
**Следовательно, исходная TRS — завершима.**

---

### 2. Классы эквивалентности

Рассмотрим семейство слов:

sₙ = (bab)ⁿ, n ≥ 1

Каждое из этих слов является нормальной формой.

Определим для слова w число:

A(w) = |w|<sub>a</sub>

При применении прямых правил к слову w в любом контексте:

| Правило | Изменение A |
|---------|-------------|
| baaa → aaab | 3 → 3 |
| aabb → abab | 2 → 2 |
| aa → bab | 2 → 1 |
| aaab → ab | 3 → 1 |
| bbb → b | 0 → 0 |

Значит при любом шаге w → w' выполняется A(w) ≥ A(w').

Так как TRS T(τ) завершаема, существует хотя бы одно слово u, достижимое из w, минимизирующее A среди всех достижимых слов. Введем:

m(w) = min { A(u) | w →  u}

При этом, если w и w’ эквивалентны, значит m(w) = m(w’), так как можно из w попасть в w’ по двусторонним правилам TRS τ, а из w’ в такое u. Значит для каждого класса эквивалентности такое число m одинаково для всех слов из этого класса.

Также нормальная форма обязательно имеет A(w) = m(w), ведь иначе из неё можно было бы сделать шаг с уменьшением A, что противоречит нормальности. То есть нормальные формы класса A=m.

Для семейства sₙ = (bab)ⁿ имеем A(sₙ) = n.  
Если для n ≠ m строки sₙ и sₘ эквивалентны, то m(sₙ) = m(sₘ), но m(sₙ) = A(sₙ) = n, m(sₘ) = A(sₘ) = m , следовательно m = n — противоречие.  

**Следовательно, существует бесконечное количество классов эквивалентности.**

---

### 3. Локальная конфлюэнтность

Рассмотрим перекрытие правил (2) и (3):

aabb ↔ aa

В слове aabb префикс aa совпадает с l₃.

Два пути:

- aabb → abab (по правилу 2)  
- aabb → babbb  (по правилу 3) → bab (по правилу 5)

Оба результата — нормальные формы, но abab ≠ bab.  

**Следовательно, TRS локально не конфлюэнтна.**

---

### 4. Пополняемость по Кнуту–Бендиксу

Введем меру:

M(w) = M(A(w), B(w), C(w), D(w))

где меры A, B, C — из пункта 1, а мера D — дополнительная для сравнения слов по лексикографическому порядку.  
Фундированный порядок: A > B > C > D.

После применения алгоритма Кнут–Бендикса (скрипт knut-bendix.py) получаем итоговую TRS τ' после одной итерации:

1. baaa -> aaab
2. aabb -> abab
3. aa -> bab
4. aaab -> ab
5. bbb -> b
6. babbabab -> babababb
7. bbabbab -> babbabb
8. bbaba -> babab
9. bababa -> babbabb
10. bababbabb -> babbab
11. babbab -> bbabb
12. bbabb -> bab
13. abab -> bab
14. abbab -> bbab
15. baba -> bab
16. bbab -> babb
17. bab -> abb
18. aba -> ab
19. abba -> abb

**Следовательно, исходная TRS T(τ) пополняема по Кнуту–Бендиксу.**

---

### 5. Инварианты

1. |w|<sub>aa</sub> — убывает либо не изменяется  
2. |w|<sub>b</sub>mod 2 — не изменяется
